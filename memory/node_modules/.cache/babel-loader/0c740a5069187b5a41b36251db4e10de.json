{"ast":null,"code":"import { apiUrl } from \"../config.json\";\nimport axios from \"axios\";\nimport { validateLoginUser, validateRegisterUser } from \"../Services/FormService\";\nimport jwtDecode from \"jwt-decode\";\nimport auth from \"./AuthService\";\nimport httpService from \"./httpService\";\nexport const createUser = async user => {\n  try {\n    let {\n      error\n    } = validateRegisterUser(user);\n    if (error) return error.message;\n    const response = await httpService.post(`${apiUrl}/users`, user);\n    console.log(\"Response: \", response); // const jwt = response.headers['x-auth-token'];\n    // console.log(jwt);\n    // auth.setToken(jwt);\n\n    return response;\n  } catch (error) {\n    return error;\n  }\n};\nexport const loginUser = async user => {\n  try {\n    let {\n      error\n    } = validateLoginUser(user);\n    if (error) return error.message;\n    const response = await httpService.post(`${apiUrl}/auth`, user);\n    const {\n      data: jwt\n    } = response;\n    auth.setToken(jwt);\n    return response;\n  } catch (error) {\n    return error;\n  }\n};\nexport const logoutUser = () => {\n  auth.removeToken();\n  window.location.replace(\"/\");\n};\nexport const getUser = () => {\n  const jwt = auth.getToken();\n  console.log(jwt);\n\n  if (jwt) {\n    const user = jwtDecode(jwt);\n    return user;\n  }\n};","map":{"version":3,"sources":["C:/Users/bob/Documents/React/Memory/memory/src/Services/UserService.js"],"names":["apiUrl","axios","validateLoginUser","validateRegisterUser","jwtDecode","auth","httpService","createUser","user","error","message","response","post","console","log","loginUser","data","jwt","setToken","logoutUser","removeToken","window","location","replace","getUser","getToken"],"mappings":"AAAA,SAASA,MAAT,QAAuB,gBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,iBADF,EAEEC,oBAFF,QAGO,yBAHP;AAIA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAOC,IAAP,IAAgB;AACxC,MAAI;AACF,QAAI;AAAEC,MAAAA;AAAF,QAAYN,oBAAoB,CAACK,IAAD,CAApC;AACA,QAAIC,KAAJ,EAAW,OAAOA,KAAK,CAACC,OAAb;AACX,UAAMC,QAAQ,GAAG,MAAML,WAAW,CAACM,IAAZ,CAAkB,GAAEZ,MAAO,QAA3B,EAAoCQ,IAApC,CAAvB;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBH,QAAzB,EAJE,CAKF;AACA;AACA;;AACA,WAAOA,QAAP;AACD,GATD,CASE,OAAOF,KAAP,EAAc;AACd,WAAOA,KAAP;AACD;AACF,CAbM;AAeP,OAAO,MAAMM,SAAS,GAAG,MAAOP,IAAP,IAAgB;AACvC,MAAI;AACF,QAAI;AAAEC,MAAAA;AAAF,QAAYP,iBAAiB,CAACM,IAAD,CAAjC;AACA,QAAIC,KAAJ,EAAW,OAAOA,KAAK,CAACC,OAAb;AACX,UAAMC,QAAQ,GAAG,MAAML,WAAW,CAACM,IAAZ,CAAkB,GAAEZ,MAAO,OAA3B,EAAkCQ,IAAlC,CAAvB;AACA,UAAM;AAAEQ,MAAAA,IAAI,EAAEC;AAAR,QAAgBN,QAAtB;AACAN,IAAAA,IAAI,CAACa,QAAL,CAAcD,GAAd;AACA,WAAON,QAAP;AACD,GAPD,CAOE,OAAOF,KAAP,EAAc;AACd,WAAOA,KAAP;AACD;AACF,CAXM;AAaP,OAAO,MAAMU,UAAU,GAAG,MAAM;AAC9Bd,EAAAA,IAAI,CAACe,WAAL;AACAC,EAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AACD,CAHM;AAOP,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC3B,QAAMP,GAAG,GAAGZ,IAAI,CAACoB,QAAL,EAAZ;AACAZ,EAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;;AACA,MAAIA,GAAJ,EAAS;AACP,UAAMT,IAAI,GAAGJ,SAAS,CAACa,GAAD,CAAtB;AACA,WAAOT,IAAP;AACD;AACF,CAPM","sourcesContent":["import { apiUrl } from \"../config.json\";\r\nimport axios from \"axios\";\r\nimport {\r\n  validateLoginUser,\r\n  validateRegisterUser,\r\n} from \"../Services/FormService\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport auth from \"./AuthService\"\r\nimport httpService from \"./httpService\";\r\n\r\nexport const createUser = async (user) => {\r\n  try {\r\n    let { error } = validateRegisterUser(user);\r\n    if (error) return error.message;\r\n    const response = await httpService.post(`${apiUrl}/users`, user);\r\n    console.log(\"Response: \",response);\r\n    // const jwt = response.headers['x-auth-token'];\r\n    // console.log(jwt);\r\n    // auth.setToken(jwt);\r\n    return response;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nexport const loginUser = async (user) => {\r\n  try {\r\n    let { error } = validateLoginUser(user);\r\n    if (error) return error.message;\r\n    const response = await httpService.post(`${apiUrl}/auth`,user);\r\n    const { data: jwt } = response;\r\n    auth.setToken(jwt);\r\n    return response;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = () => {\r\n  auth.removeToken();\r\n  window.location.replace(\"/\");\r\n};\r\n\r\n\r\n\r\nexport const getUser = () => {\r\n  const jwt = auth.getToken();\r\n  console.log(jwt);\r\n  if (jwt) {\r\n    const user = jwtDecode(jwt);\r\n    return user;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}