{"ast":null,"code":"import { apiUrl } from \"../config.json\";\nimport axios from \"axios\";\nimport { validateInputText, validateInputFile, validateComment } from \"../Services/FormService\";\nimport FormError from \"../Errors/FormError\";\nimport auth from \"./AuthService\";\naxios.default.headers['x-auth-token'] = auth.getToken();\nexport const getPosts = async () => {\n  const {\n    data: posts\n  } = await axios.get(`${apiUrl}/posts`);\n  return posts;\n};\nexport const getPost = async id => {\n  const {\n    data: post\n  } = await axios.get(`${apiUrl}/posts/${id}`); // console.log(\"Got data from \",id,\" of post: \",post);\n\n  return post;\n};\nexport const sendPost = async post => {\n  try {\n    console.log(post);\n    let {\n      error\n    } = validateInputText({\n      title: post.get(\"title\"),\n      text: post.get(\"text\")\n    });\n\n    if (error) {\n      return error.message;\n    }\n\n    let imageError = validateInputFile(post.get(\"img\"));\n    if (imageError) return imageError.message;\n    const response = await axios({\n      method: \"post\",\n      url: apiUrl + \"/posts\",\n      data: post,\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n};\nexport const updatePost = async (post, id) => {\n  try {\n    let {\n      error\n    } = validateInputText({\n      title: post.get(\"title\"),\n      text: post.get(\"text\")\n    });\n\n    if (error) {\n      return error.message;\n    }\n\n    console.log(\"To be updated: \", post);\n    const response = await axios({\n      method: \"put\",\n      url: apiUrl + \"/posts/\" + id,\n      data: post,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n};\nexport const deletePost = async id => {\n  console.log(\"To be deleted: \", id);\n\n  try {\n    const response = await axios.delete(`${apiUrl}/posts/${id}`);\n    return response;\n  } catch (error) {\n    return error;\n  }\n};\nexport const sendComment = async (comment, postId) => {\n  try {\n    let {\n      error\n    } = validateComment(comment);\n\n    if (error) {\n      return error.message;\n    }\n\n    const response = await axios({\n      method: \"post\",\n      url: apiUrl + \"/posts/\" + postId + \"/comments\",\n      data: comment,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return response;\n  } catch (error) {\n    return error;\n  }\n};","map":{"version":3,"sources":["C:/Users/bob/Documents/React/Memory/memory/src/Services/PostService.js"],"names":["apiUrl","axios","validateInputText","validateInputFile","validateComment","FormError","auth","default","headers","getToken","getPosts","data","posts","get","getPost","id","post","sendPost","console","log","error","title","text","message","imageError","response","method","url","updatePost","deletePost","delete","sendComment","comment","postId"],"mappings":"AAAA,SAASA,MAAT,QAAuB,gBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,EAA4BC,iBAA5B,EAA+CC,eAA/C,QAAsE,yBAAtE;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AAEAL,KAAK,CAACM,OAAN,CAAcC,OAAd,CAAsB,cAAtB,IAAwCF,IAAI,CAACG,QAAL,EAAxC;AAEA,OAAO,MAAMC,QAAQ,GAAG,YAAY;AAClC,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAkB,MAAMX,KAAK,CAACY,GAAN,CAAW,GAAEb,MAAO,QAApB,CAA9B;AACA,SAAOY,KAAP;AACD,CAHM;AAKP,OAAO,MAAME,OAAO,GAAG,MAAOC,EAAP,IAAc;AACnC,QAAM;AAAEJ,IAAAA,IAAI,EAAEK;AAAR,MAAiB,MAAMf,KAAK,CAACY,GAAN,CAAW,GAAEb,MAAO,UAASe,EAAG,EAAhC,CAA7B,CADmC,CAEnC;;AACA,SAAOC,IAAP;AACD,CAJM;AAMP,OAAO,MAAMC,QAAQ,GAAG,MAAOD,IAAP,IAAgB;AACtC,MAAI;AACFE,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,QAAI;AAAEI,MAAAA;AAAF,QAAYlB,iBAAiB,CAAC;AAAEmB,MAAAA,KAAK,EAAEL,IAAI,CAACH,GAAL,CAAS,OAAT,CAAT;AAA4BS,MAAAA,IAAI,EAAEN,IAAI,CAACH,GAAL,CAAS,MAAT;AAAlC,KAAD,CAAjC;;AACA,QAAIO,KAAJ,EAAW;AACT,aAAOA,KAAK,CAACG,OAAb;AACD;;AAED,QAAIC,UAAU,GAAGrB,iBAAiB,CAACa,IAAI,CAACH,GAAL,CAAS,KAAT,CAAD,CAAlC;AACA,QAAIW,UAAJ,EAAgB,OAAOA,UAAU,CAACD,OAAlB;AAChB,UAAME,QAAQ,GAAG,MAAMxB,KAAK,CAAC;AAC3ByB,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,GAAG,EAAE3B,MAAM,GAAG,QAFa;AAG3BW,MAAAA,IAAI,EAAEK,IAHqB;AAI3BR,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAJkB,KAAD,CAA5B;AAMA,WAAOiB,QAAP;AACD,GAhBD,CAgBE,OAAOL,KAAP,EAAc;AAEd,WAAOA,KAAP;AACD;AACF,CArBM;AAuBP,OAAO,MAAMQ,UAAU,GAAG,OAAOZ,IAAP,EAAaD,EAAb,KAAoB;AAC5C,MAAI;AACF,QAAI;AAAEK,MAAAA;AAAF,QAAYlB,iBAAiB,CAAC;AAAEmB,MAAAA,KAAK,EAAEL,IAAI,CAACH,GAAL,CAAS,OAAT,CAAT;AAA4BS,MAAAA,IAAI,EAAEN,IAAI,CAACH,GAAL,CAAS,MAAT;AAAlC,KAAD,CAAjC;;AACA,QAAIO,KAAJ,EAAW;AACT,aAAOA,KAAK,CAACG,OAAb;AACD;;AACDL,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,IAA/B;AACA,UAAMS,QAAQ,GAAG,MAAMxB,KAAK,CAAC;AAC3ByB,MAAAA,MAAM,EAAE,KADmB;AAE3BC,MAAAA,GAAG,EAAE3B,MAAM,GAAG,SAAT,GAAqBe,EAFC;AAG3BJ,MAAAA,IAAI,EAAEK,IAHqB;AAI3BR,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAJkB,KAAD,CAA5B;AAMA,WAAOiB,QAAP;AACD,GAbD,CAaE,OAAOL,KAAP,EAAc;AACd,WAAOA,KAAP;AACD;AACF,CAjBM;AAmBP,OAAO,MAAMS,UAAU,GAAG,MAAOd,EAAP,IAAc;AACtCG,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BJ,EAA/B;;AACA,MAAI;AACF,UAAMU,QAAQ,GAAG,MAAMxB,KAAK,CAAC6B,MAAN,CAAc,GAAE9B,MAAO,UAASe,EAAG,EAAnC,CAAvB;AACA,WAAOU,QAAP;AACD,GAHD,CAGE,OAAOL,KAAP,EAAc;AACd,WAAOA,KAAP;AACD;AACF,CARM;AAUP,OAAO,MAAMW,WAAW,GAAG,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AACpD,MAAI;AACF,QAAI;AAAEb,MAAAA;AAAF,QAAYhB,eAAe,CAAC4B,OAAD,CAA/B;;AACA,QAAIZ,KAAJ,EAAW;AACT,aAAOA,KAAK,CAACG,OAAb;AACD;;AACD,UAAME,QAAQ,GAAG,MAAMxB,KAAK,CAAC;AAC3ByB,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,GAAG,EAAE3B,MAAM,GAAG,SAAT,GAAqBiC,MAArB,GAA8B,WAFR;AAG3BtB,MAAAA,IAAI,EAAEqB,OAHqB;AAI3BxB,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAJkB,KAAD,CAA5B;AAMA,WAAOiB,QAAP;AACD,GAZD,CAYE,OAAOL,KAAP,EAAc;AACd,WAAOA,KAAP;AACD;AACF,CAhBM","sourcesContent":["import { apiUrl } from \"../config.json\";\r\nimport axios from \"axios\";\r\nimport { validateInputText, validateInputFile, validateComment } from \"../Services/FormService\";\r\nimport FormError from \"../Errors/FormError\";\r\nimport auth from \"./AuthService\"\r\n\r\naxios.default.headers['x-auth-token'] = auth.getToken();\r\n\r\nexport const getPosts = async () => {\r\n  const { data: posts } = await axios.get(`${apiUrl}/posts`);\r\n  return posts;\r\n};\r\n\r\nexport const getPost = async (id) => {\r\n  const { data: post } = await axios.get(`${apiUrl}/posts/${id}`);\r\n  // console.log(\"Got data from \",id,\" of post: \",post);\r\n  return post;\r\n};\r\n\r\nexport const sendPost = async (post) => {\r\n  try {\r\n    console.log(post);\r\n    let { error } = validateInputText({ title: post.get(\"title\"), text: post.get(\"text\") });\r\n    if (error) {\r\n      return error.message;\r\n    }\r\n    \r\n    let imageError = validateInputFile(post.get(\"img\"));\r\n    if (imageError) return imageError.message;\r\n    const response = await axios({\r\n      method: \"post\",\r\n      url: apiUrl + \"/posts\",\r\n      data: post,\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    \r\n    return error;\r\n  }\r\n};\r\n\r\nexport const updatePost = async (post, id) => {\r\n  try {\r\n    let { error } = validateInputText({ title: post.get(\"title\"), text: post.get(\"text\") });\r\n    if (error) {\r\n      return error.message;\r\n    }\r\n    console.log(\"To be updated: \", post);\r\n    const response = await axios({\r\n      method: \"put\",\r\n      url: apiUrl + \"/posts/\" + id,\r\n      data: post,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nexport const deletePost = async (id) => {\r\n  console.log(\"To be deleted: \", id);\r\n  try {\r\n    const response = await axios.delete(`${apiUrl}/posts/${id}`);\r\n    return response;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nexport const sendComment = async (comment, postId) => {\r\n  try {\r\n    let { error } = validateComment(comment);\r\n    if (error) {\r\n      return error.message;\r\n    }\r\n    const response = await axios({\r\n      method: \"post\",\r\n      url: apiUrl + \"/posts/\" + postId + \"/comments\",\r\n      data: comment,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}